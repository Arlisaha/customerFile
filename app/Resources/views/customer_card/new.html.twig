{% extends '::layout.html.twig' %}

{% set page = 'Nouvelle Fiche Client' %}

{% block pagetitle %}{{ page }}{% endblock %}

{% block container %}
    <h1 id="page_title">{{ page }}</h1>
    <div id="container">
        {{ form_start(form) }}
            <span class="block_title">Client</span>
            <div id="customer" class="form_block">
                <div id="address">
                    <label class="align_top">Adresse : </label>
                    {{ form_widget(form.customer.address) }}
                    <div id="address_elts">
                        <div class="address_elts">
                            <label>Code postal : </label>
                            {{ form_widget(form.customer.zipCode) }}
                        </div>
                        <div class="address_elts">
                            <label>Ville : </label>
                            {{ form_widget(form.customer.city) }}
                        </div>
                    </div>
                </div>
                <div id="status">
                    <label>Statut : </label>
                    {{ form_widget(form.customer.status) }}
                </div>
                <div id="owners" class="inner_form_block left">
                    <button id="add_owner">Ajouter un propri√©taire</button>
                    {{ form_widget(form.customer.owners) }}
                    {{ form_widget(form.customer.mainOwner) }}
                </div>
                <div id="animals" class="inner_form_block right">
                    <button id="add_cat">Ajouter un chat</button>
                    <button id="add_dog">Ajouter un chien</button>
                    {{ form_widget(form.customer.cats) }}
                    {{ form_widget(form.customer.dogs) }}
                    {{ form_widget(form.customer.mainAnimal) }}
                </div>
            </div>
            <span class="block_title">Consultations</span>
            <div id="consultations" class="form_block">
                <button id="add_consultation">Ajouter une consultation</button>
                {{ form_widget(form.consultations) }}
            </div>
            <span class="block_title">Commentaires</span>
            <div id="comments" class="textarea_block">
                {{ form_widget(form.comments, {'attr': {'class': 'froala'}}) }}
            </div>
            <span id="submit_btn">
                {{ form_widget(form.submit, { 'label': 'Valider' }) }}
            </span>
            <div style="display: none">{{ form_rest(form) }}</div>
        {{ form_end(form) }}
    </div>
{% endblock %}

{% block pagejavascripts %}
    <script>
        var ownersData = {
            id: '#customer_card_customer_owners',
            prototype: '__owner__',
            count: '{{ form.customer.owners|length }}'
        };
        var catsData = {
            id: '#customer_card_customer_cats',
            prototype: '__cat__',
            count: '{{ form.customer.cats|length }}'
        };
        var dogsData = {
            id: '#customer_card_customer_dogs',
            prototype: '__dog__',
            count: '{{ form.customer.dogs|length }}'
        };
        var consultationsData = {
            id: '#customer_card_consultations',
            prototype: '__consultation__',
            count: '{{ form.consultations|length }}'
        };
    </script>
    <script src="{{ asset('public/js/customer_card/form_handler.js') }}"></script>
{% endblock %}